<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sqlMap PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN" "http://ibatis.apache.org/dtd/sql-map-2.dtd">

<sqlMap namespace="com.zdqk.ewm.po.Photos">
  <typeAlias alias="photos" type="com.zdqk.ewm.po.Photos"/>
  <resultMap id="photosResult" class="photos">
    <result property="id" column="ID"/>
    <result property="photoName" column="PHOTONAME"/>
    <result property="exhibitId" column="EXHIBITID"/>
    <result property="exhibitName" column="EXHIBITNAME"/>
    <result property="photoUrl" column="PHOTOURL"/>
    <result property="inputDateTime" column="INPUTDATETIME"/>
    <result property="inputDate" column="INPUTDATE"/>
    <result property="priority" column="PRIORITY"/>
    <result property="status" column="STATUS"/>
    <result property="type" column="TYPE"/>
  </resultMap>
  <insert id="insert" parameterClass="photos">insert into PHOTOS( ID,PHOTONAME,EXHIBITID,EXHIBITNAME,PHOTOURL,INPUTDATETIME,INPUTDATE,PRIORITY,STATUS,TYPE ) values ( #id#,#photoName#,#exhibitId#,#exhibitName#,#photoUrl#,#inputDateTime#,#inputDate#,#priority#,#status#,#type# )</insert>
  <delete id="delete" parameterClass="photos">delete from PHOTOS where id = #id#</delete>
  <update id="update" parameterClass="photos">update PHOTOS 
    <dynamic prepend="set">
      <isNotNull prepend="," property="photoName">PHOTONAME = #photoName#</isNotNull>
      <isNotNull prepend="," property="exhibitId">EXHIBITID = #exhibitId#</isNotNull>
      <isNotNull prepend="," property="exhibitName">EXHIBITNAME = #exhibitName#</isNotNull>
      <isNotNull prepend="," property="photoUrl">PHOTOURL = #photoUrl#</isNotNull>
      <isNotNull prepend="," property="inputDateTime">INPUTDATETIME = #inputDateTime#</isNotNull>
      <isNotNull prepend="," property="inputDate">INPUTDATE = #inputDate#</isNotNull>
      <isNotNull prepend="," property="priority">PRIORITY = #priority#</isNotNull>
      <isNotNull prepend="," property="status">STATUS = #status#</isNotNull>
       <isNotNull prepend="," property="type">TYPE = #type#</isNotNull>
    </dynamic>where id = #id#
  </update>
  <select id="findById" parameterClass="java.lang.Long" resultMap="photosResult">select * from PHOTOS where id = #id#</select>
  <select id="findNameById" parameterClass="java.lang.Long" resultMap="photosResult">select * from PHOTOS where id = #id#</select>
  <select id="selectAll" parameterClass="java.util.Map" resultMap="photosResult">select ID,PHOTONAME,EXHIBITID,EXHIBITNAME,PHOTOURL,INPUTDATETIME,INPUTDATE,PRIORITY,STATUS,TYPE from PHOTOS
    <dynamic prepend="where">
      <isNotNull prepend=" and " property="photoName">PHOTONAME like '%$photoName$%'</isNotNull>
      <isNotNull prepend=" and " property="exhibitId">EXHIBITID = #exhibitId#</isNotNull>
      <isNotNull prepend=" and " property="exhibitName">EXHIBITNAME = #exhibitName#</isNotNull>
      <isNotNull prepend=" and " property="photoUrl">PHOTOURL = #photoUrl#</isNotNull>
      <isNotNull prepend=" and " property="inputDateTime">INPUTDATETIME = #inputDateTime#</isNotNull>
      <isNotNull prepend=" and " property="inputDate">INPUTDATE = #inputDate#</isNotNull>
      <isNotNull prepend=" and " property="priority">PRIORITY = #priority#</isNotNull>
      <isNotNull prepend=" and " property="status">STATUS = #status#</isNotNull>
      <isNotNull prepend=" and " property="type">TYPE = #type#</isNotNull>
    </dynamic>
  </select>
  <select id="selectPage" parameterClass="java.util.Map" resultMap="photosResult">select ID,PHOTONAME,EXHIBITID,EXHIBITNAME,PHOTOURL,INPUTDATETIME,INPUTDATE,PRIORITY,STATUS,TYPE from PHOTOS
    <dynamic prepend="where">
      <isNotNull prepend=" and " property="photoName">PHOTONAME like '%$photoName$%'</isNotNull>
      <isNotNull prepend=" and " property="exhibitId">EXHIBITID = #exhibitId#</isNotNull>
      <isNotNull prepend=" and " property="exhibitName">EXHIBITNAME = #exhibitName#</isNotNull>
      <isNotNull prepend=" and " property="photoUrl">PHOTOURL = #photoUrl#</isNotNull>
      <isNotNull prepend=" and " property="inputDateTime">INPUTDATETIME = #inputDateTime#</isNotNull>
      <isNotNull prepend=" and " property="inputDate">INPUTDATE = #inputDate#</isNotNull>
      <isNotNull prepend=" and " property="priority">PRIORITY = #priority#</isNotNull>
      <isNotNull prepend=" and " property="status">STATUS = #status#</isNotNull>
      <isNotNull prepend=" and " property="type">TYPE = #type#</isNotNull>
    </dynamic>order by id desc limit #startIndex#,#endIndex#
  </select>
  <select id="selectCount" parameterClass="java.util.Map" resultClass="java.lang.Long">select count(id) from PHOTOS 
    <dynamic prepend="where">
      <isNotNull prepend=" and " property="photoName">PHOTONAME like '%$photoName$%'</isNotNull>
      <isNotNull prepend=" and " property="exhibitId">EXHIBITID = #exhibitId#</isNotNull>
      <isNotNull prepend=" and " property="exhibitName">EXHIBITNAME = #exhibitName#</isNotNull>
      <isNotNull prepend=" and " property="photoUrl">PHOTOURL = #photoUrl#</isNotNull>
      <isNotNull prepend=" and " property="inputDateTime">INPUTDATETIME = #inputDateTime#</isNotNull>
      <isNotNull prepend=" and " property="inputDate">INPUTDATE = #inputDate#</isNotNull>
      <isNotNull prepend=" and " property="priority">PRIORITY = #priority#</isNotNull>
      <isNotNull prepend=" and " property="status">STATUS = #status#</isNotNull>
      <isNotNull prepend=" and " property="type">TYPE = #type#</isNotNull>
    </dynamic>
  </select>
</sqlMap>
