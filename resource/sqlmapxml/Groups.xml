<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sqlMap PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN" "http://ibatis.apache.org/dtd/sql-map-2.dtd">

<sqlMap namespace="com.zdqk.ewm.po.Groups">
  <typeAlias alias="groups" type="com.zdqk.ewm.po.Groups"/>
  <resultMap id="groupsResult" class="groups">
    <result property="id" column="ID"/>
    <result property="groupName" column="GROUPNAME"/>
    <result property="groupType" column="GROUPTYPE"/>
    <result property="status" column="STATUS"/>
    <result property="note" column="NOTE"/>
  </resultMap>
  <insert id="insert" parameterClass="groups">insert into GROUPS( ID,GROUPNAME,GROUPTYPE,STATUS,NOTE ) values ( #id#,#groupName#,#groupType#,#status#,#note# )</insert>
  <delete id="delete" parameterClass="groups">delete from GROUPS where id = #id#</delete>
  <update id="update" parameterClass="groups">update GROUPS 
    <dynamic prepend="set">
      <isNotNull prepend="," property="groupName">GROUPNAME = #groupName#</isNotNull>
      <isNotNull prepend="," property="groupType">GROUPTYPE = #groupType#</isNotNull>
      <isNotNull prepend="," property="status">STATUS = #status#</isNotNull>
      <isNotNull prepend="," property="note">NOTE = #note#</isNotNull>
    </dynamic>where id = #id#
  </update>
  <select id="findIsExits" parameterClass="java.util.Map" resultMap="groupsResult">select * from GROUPS where groupName = #groupName# and groupType=#groupType#</select>
  <select id="findById" parameterClass="java.lang.Long" resultMap="groupsResult">select * from GROUPS where id = #id#</select>
  <select id="findNameById" parameterClass="java.lang.Long" resultMap="groupsResult">select * from GROUPS where id = #id#</select>
  <select id="selectAll" parameterClass="java.util.Map" resultMap="groupsResult">select ID,GROUPNAME,GROUPTYPE,STATUS,NOTE from GROUPS
    <dynamic prepend="where">
      <isNotNull prepend=" and " property="groupName">GROUPNAME like '%$groupName$%'</isNotNull>
      <isNotNull prepend=" and " property="groupType">GROUPTYPE = #groupType#</isNotNull>
      <isNotNull prepend=" and " property="status">STATUS = #status#</isNotNull>
      <isNotNull prepend=" and " property="note">NOTE = #note#</isNotNull>
    </dynamic>
  </select>
  
  <select id="selectPage" parameterClass="java.util.Map" resultMap="groupsResult">select ID,GROUPNAME,GROUPTYPE,STATUS,NOTE from GROUPS
    <dynamic prepend="where">
      <isNotNull prepend=" and " property="groupName">GROUPNAME like '%$groupName$%'</isNotNull>
      <isNotNull prepend=" and " property="groupType">GROUPTYPE = #groupType#</isNotNull>
      <isNotNull prepend=" and " property="status">STATUS = #status#</isNotNull>
      <isNotNull prepend=" and " property="note">NOTE = #note#</isNotNull>
    </dynamic>order by id desc limit #startIndex#,#endIndex#
  </select>
  <select id="selectCount" parameterClass="java.util.Map" resultClass="java.lang.Long">select count(id) from GROUPS 
    <dynamic prepend="where">
      <isNotNull prepend=" and " property="groupName">GROUPNAME like '%$groupName$%'</isNotNull>
      <isNotNull prepend=" and " property="groupType">GROUPTYPE = #groupType#</isNotNull>
      <isNotNull prepend=" and " property="status">STATUS = #status#</isNotNull>
      <isNotNull prepend=" and " property="note">NOTE = #note#</isNotNull>
    </dynamic>
  </select>
</sqlMap>
